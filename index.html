<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kartka Urodzinowa â€” Kliknij, by otworzyÄ‡</title>
  <meta name="description" content="OtwierajÄ…ca siÄ™ kartka urodzinowa â€” kliknij, aby usÅ‚yszeÄ‡ muzykÄ™ i zobaczyÄ‡ confetti" />
  <style>
    :root{
      --bg: linear-gradient(135deg,#fff8fb 0%,#fffefc 100%);
      --card-width: 520px;
      --card-height: 340px;
      --accent: #ff6b8a;
      --paper: #fffefc;
      --shadow: rgba(18,18,18,0.12);
      --pink: #ff66b3;
    }

    html,body{height:100%;}
    body{
      margin:0;
      display:grid;
      place-items:center;
      background:var(--bg);
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:24px;
      color:#111;
    }

    .stage{
      perspective:1200px;
      width:calc(var(--card-width) + 40px);
      height:calc(var(--card-height) + 40px);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .card-wrap{
      width:var(--card-width);
      height:var(--card-height);
      position:relative;
      transform-style:preserve-3d;
      transition:transform 900ms cubic-bezier(.22,.9,.16,1);
      transform-origin:left center;
      box-shadow: 0 18px 40px var(--shadow);
      border-radius:14px;
      background:linear-gradient(180deg,#fff,#fff8f6);
      overflow:visible;
    }

    .card-wrap.open{ transform: rotateY(-14deg) translateZ(0); }

    .panel{
      position:absolute;
      top:0;
      left:0;
      width:50%;
      height:100%;
      overflow:hidden;
      backface-visibility:hidden;
      transform-style:preserve-3d;
      border-radius:12px;
    }

    .panel.front{
      left:0;
      width:50%;
      z-index:3;
      transform-origin:left center;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0;
      box-sizing:border-box;
      border-right:1px solid rgba(0,0,0,0.03);
      background:#fff;
    }

    .cover-img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .flap{
      position:absolute;
      top:0;
      left:50%;
      width:50%;
      height:100%;
      transform-origin:left center;
      transform: rotateY(0deg);
      transition: transform 900ms cubic-bezier(.22,.9,.16,1);
      z-index:2;
      border-radius:0 12px 12px 0;
      overflow:hidden;
      box-shadow: inset -6px 0 12px rgba(0,0,0,0.02);
      background: linear-gradient(0deg,#fff8f1,#fffefc);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .card-wrap.open .flap{ transform: rotateY(-180deg); }

    .panel.back{
      left:50%;
      width:50%;
      z-index:1;
      background:linear-gradient(180deg,#fffefc,#fff8f1);
      padding:28px;
      box-sizing:border-box;
      border-radius:0 12px 12px 0;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
    }

    .title{font-size:20px;font-weight:700;margin:0 0 8px 0;color:#2b1b3a}
    .subtitle{font-size:13px;color:#6b586e;margin:0}

    .greeting{
      font-size:20px;
      line-height:1.3;
      text-align:center;
      max-width:92%;
      color:var(--pink);
      font-family:'Comic Sans MS','Comic Sans',cursive, sans-serif;
      font-weight:700;
    }

    .controls{position:absolute;right:12px;bottom:12px;display:flex;gap:8px}
    .btn{background:transparent;border:1px solid rgba(0,0,0,0.08);padding:8px 12px;border-radius:8px;font-size:13px;cursor:pointer}
    .btn.primary{background:var(--accent);color:white;border:none}

    .mute{position:absolute;left:12px;bottom:12px;border-radius:999px;padding:8px 10px;border:1px solid rgba(0,0,0,0.06);background:rgba(255,255,255,0.9);cursor:pointer}

    .confetti { position:absolute; inset:0; pointer-events:none; z-index:6; overflow:visible; }
    .confetti i{ position:absolute; display:block; width:10px; height:14px; opacity:0; transform-origin:center; transform: translate3d(0,0,0) rotate(0deg); }

    @media (max-width:560px){ :root{--card-width:360px;--card-height:260px} .greeting{font-size:16px} }

    .hint{position:absolute;top:-48px;opacity:0.95;font-size:13px;color:#3b2b3a}
  </style>
</head>
<body>

  <!--
    Instrukcje do edycji (krÃ³tkie):
    - Aby zmieniÄ‡ obraz okÅ‚adki: wgraj plik o nazwie `cover.jpg` do repo i zostaw takÄ… nazwÄ™, albo edytuj liniÄ™ <img src="cover.jpg"> w pliku index.html na nazwÄ™ pliku, ktÃ³ry wgraÅ‚aÅ›.
    - Aby dodaÄ‡ muzykÄ™: wgraj plik audio (mp3) o nazwie `party.mp3` i zostaw takÄ… nazwÄ™ lub zmieÅ„ atrybut src elementu <audio id="bgAudio">.
    - Aby zmieniÄ‡ tekst Å¼yczeÅ„: edytuj zawartoÅ›Ä‡ elementu z klasÄ… "greeting" wewnÄ…trz panelu back.
    - Zapisz plik jako index.html i wgraj (Upload files) razem z cover.jpg i party.mp3 do repo na GitHub.
  -->

  <div class="stage">
    <div class="card-wrap" id="card" role="button" tabindex="0" aria-label="Kliknij, aby otworzyÄ‡ kartkÄ™">

      <!-- FRONT: obraz okÅ‚adki (zastÄ…p cover.jpg wÅ‚asnym plikiem) -->
      <div class="panel front" aria-hidden="false">
        <img src="cover.jpg" alt="PrzÃ³d kartki" class="cover-img" id="coverImg">
      </div>

      <!-- FLAP: napis zachÄ™cajÄ…cy -->
      <div class="flap" aria-hidden="true">
        <div style="text-align:center;transform:translateZ(20px);padding:18px;">
          <p style="margin:0;font-weight:700;color:#6b2b4a;">Dla Ciebie ðŸŽ‰</p>
          <p style="margin-top:6px;font-size:12px;color:#7a6576">Kliknij, Å¼eby otworzyÄ‡</p>
        </div>
      </div>

      <!-- BACK: treÅ›Ä‡ kartki -->
      <div class="panel back" aria-hidden="true">
        <div>
          <p class="greeting" id="greetingText">Sto lat! ðŸŽ‚<br> Tutaj wpisz swoje Å¼yczenia â€” bÄ™dÄ… wyÅ›wietlone rÃ³Å¼owÄ…, komiksowÄ… czcionkÄ….</p>
        </div>
      </div>

      <!-- Confetti root -->
      <div class="confetti" id="confetti" aria-hidden="true"></div>

      <!-- Audio: wgraj party.mp3 do repo, zostaw nazwÄ™ lub zamieÅ„ w kodzie -->
      <audio id="bgAudio" src="party.mp3" preload="auto" loop playsinline></audio>

      <!-- Mute/unmute -->
      <button class="mute" id="muteBtn" aria-label="Wycisz muzykÄ™">ðŸ”Š</button>

    </div>
  </div>

  <script>
    const card = document.getElementById('card');
    const confettiRoot = document.getElementById('confetti');
    const audio = document.getElementById('bgAudio');
    const muteBtn = document.getElementById('muteBtn');
    let isMuted = false;

    muteBtn.addEventListener('click', (e)=>{
      e.stopPropagation();
      isMuted = !isMuted;
      audio.muted = isMuted;
      muteBtn.textContent = isMuted ? 'ðŸ”ˆ' : 'ðŸ”Š';
    });

    function createConfetti(){
      confettiRoot.innerHTML = '';
      const colors = ['#FF6B8A','#FFD166','#6BF1C9','#6B8CFF','#FFB2E6','#FFF66B'];
      for(let i=0;i<28;i++){
        const el = document.createElement('i');
        const left = 60 + Math.random()*380; // within card
        const top = 20 + Math.random()*220;
        el.style.left = left + 'px';
        el.style.top = top + 'px';
        const c = colors[Math.floor(Math.random()*colors.length)];
        el.style.background = c;
        el.style.borderRadius = (Math.random()>0.5?'2px':'50%');
        const dur = 900 + Math.random()*900;
        el.style.transition = `transform ${dur}ms cubic-bezier(.16,.9,.3,1), opacity ${dur}ms linear`;
        confettiRoot.appendChild(el);
        setTimeout(()=>{
          const dx = (Math.random()-0.5)*700;
          const dy = -120 - Math.random()*360;
          const rot = (Math.random()-0.5)*1080;
          el.style.transform = `translate3d(${dx}px, ${dy}px, 0) rotate(${rot}deg) scale(${0.8+Math.random()*0.6})`;
          el.style.opacity = '1';
        }, 40 + i*20);
      }
      setTimeout(()=>{ confettiRoot.innerHTML = ''; }, 3200);
    }

    function openCard(){
      if(card.classList.contains('open')) return;
      card.classList.add('open');
      // Accessibility states
      card.querySelector('.flap').setAttribute('aria-hidden','true');
      card.querySelector('.panel.back').setAttribute('aria-hidden','false');
      // play music (must be initiated by user gesture, we're inside click handler)
      if(audio){
        audio.muted = isMuted;
        const playPromise = audio.play();
        if(playPromise !== undefined){
          playPromise.catch(()=>{
            // Autoplay prevented â€” that's fine; user clicked so should play in most browsers
          });
        }
      }
      createConfetti();
    }

    function closeCard(){
      if(!card.classList.contains('open')) return;
      card.classList.remove('open');
      card.querySelector('.flap').setAttribute('aria-hidden','false');
      card.querySelector('.panel.back').setAttribute('aria-hidden','true');
      if(audio) audio.pause();
    }

    card.addEventListener('click', ()=>{ if(card.classList.contains('open')) closeCard(); else openCard(); });
    card.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); card.click(); } if(e.key === 'Escape') closeCard(); });

    // Small UX: hide mute button if audio file not present (will still show if missing but harmless)
    audio.addEventListener('error', ()=>{ muteBtn.style.display = 'none'; });

    // Optional: auto-open once for demo (comment out if undesired)
    // setTimeout(()=>{ openCard(); }, 700);
  </script>

</body>
</html>
